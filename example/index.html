<!DOCTYPE html>
<html>

<head>
  <title>Keyframes Example</title>
  <script type="text/javascript" src="../dist/keyframes.js"></script>
  <style>
    body{
      text-align: center;
    }
    .ball-container {
      width:600px;
      margin-left:auto;
      margin-right:auto;
      text-align:center;
      margin-top:20px;
    }
    #ball {
      width:100px;
      height:90px;
      padding-top:10px;
      background-color:yellow;
      text-align:center;
      font-family:tahoma;
      font-size:56px;
      font-weight:bold;
      border-radius: 50px;
      box-shadow: 0px 0px 10px 0px #000;
    }
  </style>
</head>

<body>
  <div class="ball-container">
    <div id="ball" style="transform:rotate(90deg);">: )</div>
    <br />
    <input type="button" onclick="play('normal')" value="Ease Move" />
    <input type="button" onclick="play('linear')" value="Linear Move" />
    <input type="button" onclick="play('delay')" value="2 Second Delay" />
    <input type="button" onclick="play('once')" value="Move Once" />
    <input type="button" onclick="play('spin')" value="Spin" />
    <input type="button" onclick="play('multi')" value="Multiple Animations" />
    <br />
    <input type="button" onclick="pause()" value="Pause" />
    <input type="button" onclick="resume()" value="Resume" />
    <input type="button" onclick="play()" value="Reset" />
    <br />
    <br />Callback count: <b id="cb">0</b>
    <br />
  </div>

  <script type='text/javascript'>

    var ball = new Keyframes(document.getElementById('ball'));

    // Adding a new animation sequences (keyframe)
    Keyframes.define([{
      name: 'ball-move',
      '0%': {
        'margin-left': '0px'
      },
      '50%': {
        'margin-left': '600px'
      },
      '100%': {
        'margin-left': '0px'
      }
    }, {
      name: 'ball-spin',
      from: {
        'transform': 'rotate(90deg)'
      },
      to: {
        'transform': 'rotate(450deg)'
      }
    }]);

    function play(animation) {
      ball.reset(function() {
        switch (animation) {
          case 'normal':

            // move with easing
            ball.play({
              name: 'ball-move',
              duration: "3s",
              timingFunction: 'ease',
              iterationCount: 'infinite',
              direction: 'normal',
              fillMode: 'forwards',
              complete: increment
            });

            break;
          case 'spin':

            // run spin keyframes using the shorthand method.
            ball.play('ball-spin 500ms linear 0s 3 normal forwards', increment);

            break;
          case 'linear':

            // move with linear timing
            ball.play({
              name: 'ball-move',
              duration: "3s",
              timingFunction: 'linear',
              iterationCount: 'infinite',
              complete: increment
            });

            break;
          case 'delay':

            // set a 2 second delay before starting
            ball.play({
              name: 'ball-move',
              duration: "3s",
              timingFunction: 'linear',
              delay: "3s",
              iterationCount: 'infinite',
              complete: increment
            });

            break;
          case 'once':

            // only play the animation once
            ball.play({
              name: 'ball-move',
              duration: "3s",
              timingFunction: 'ease',
              complete: increment
            });

            break;
          case 'multi':
            // play multiple animations
            ball.play([
              'ball-spin 500ms linear 0s 6',
              {
                name: 'ball-move',
                duration: "3s",
                timingFunction: 'ease',
                iterationCount: 1
              }
            ],
            increment);
        }
      })

    }

    function pause() {
      // freeze keyframe animation and kill callback
      ball.pause();
    }

    function resume() {
      // resume keyframe animation
      ball.resume();
    }

    // example callback function
    const cbElem = document.getElementById('cb');
    function increment() {
      cbElem.innerHTML = parseInt(cbElem.innerHTML) + 1;
    }
  </script>
</body>

</html>
